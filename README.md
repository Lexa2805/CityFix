# ğŸŒ† CityFix QR  
### Smart City QR Touchpoints for Civic Reporting, Culture & Engagement

CityFix QR transforms urban environments into an interactive digital network.  
Citizens scan QR codes placed around the city to report issues, explore cultural info, submit micro-surveys, and earn rewards.  
City operators use an admin dashboard to manage reports, track SLAs, and analyze city performance.

This project uses **FastAPI**, **Next.js**, **Flutter**, **Supabase**, and **Google Gemini**.

---

## ğŸš€ Features

### ğŸ§‘â€ğŸ¦½ Citizen Experience  
- Scan QR codes at benches, lamp posts, parks, intersections  
- Auto-filled location & asset info from QR metadata  
- Report issues using:
  - photos  
  - videos  
  - voice notes  
- AI triage powered by **Gemini Vision**:
  - issue type  
  - severity  
  - autogenerated title/caption  
- Duplicate detection using embeddings + PostGIS  
- â€œWhatâ€™s Here?â€ cultural & historical info  
- Quick micro-surveys (clean/safe/well-lit)  
- Earn points & rewards  

---

### ğŸ›ï¸ Admin Console (Next.js)
- Real-time map of reports  
- SLA & contractor performance dashboards  
- Auto-routing to departments  
- Duplicate & fraud detection  
- Asset manager (benches, lamps, stops, art)  
- Content manager (events, cultural cards, surveys)  
- QR code generator + printing  
- Role-based permissions  

---

### ğŸ§  AI / Machine Learning (Gemini)
- Vision classification  
- Severity estimation  
- Embeddings for duplicate detection  
- Multilingual text (RO/EN/HU/DE)  
- Cultural summaries/explanations  
- Optional RAG over city procedures  

---

## ğŸ—ï¸ Tech Stack

### ğŸ”§ Backend (FastAPI)
- FastAPI (Python)
- Supabase Postgres + PostGIS
- Supabase Auth
- Supabase Storage (media)
- Google Gemini 1.5 Flash / Vision
- Redis (optional cache)
- pgvector for embeddings

### ğŸ¨ Frontend (Next.js)
- Next.js App Router  
- TailwindCSS  
- Google Maps / Mapbox  
- Supabase Auth or Clerk (for admin roles)  

### ğŸ“± Mobile (Flutter)
- Deep-link QR flow  
- Full reporting UI with camera, gallery, voice  
- Subscriptions to status updates  

---

## ğŸ—‚ï¸ Repository Structure

/
â”œâ”€â”€ backend/ # FastAPI backend
â”‚ â”œâ”€â”€ app/
â”‚ â”‚ â”œâ”€â”€ api/
â”‚ â”‚ â”œâ”€â”€ models/
â”‚ â”‚ â”œâ”€â”€ services/
â”‚ â”‚ â”œâ”€â”€ core/
â”‚ â”‚ â””â”€â”€ main.py
â”‚ â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ web/ # Next.js admin + citizen web
â”‚ â”œâ”€â”€ app/
â”‚ â”œâ”€â”€ components/
â”‚ â””â”€â”€ lib/
â”‚
â”œâ”€â”€ app/ # Flutter mobile app
â”‚ â”œâ”€â”€ lib/
â”‚ â”œâ”€â”€ android/
â”‚ â”œâ”€â”€ ios/
â”‚ â””â”€â”€ pubspec.yaml
â”‚
â””â”€â”€ README.md

yaml
CopiazÄƒ codul

---

## ğŸ§© Data Model (Simplified)

### assets
id, type, qr_id, zone_id, location (PostGIS), ownership, installed_at

shell
CopiazÄƒ codul

### reports
id, asset_id, reporter_id,
issue_type, severity,
lat, lon,
media_urls[],
status,
created_at, updated_at, closed_at

shell
CopiazÄƒ codul

### duplicates
report_id, canonical_report_id, score

shell
CopiazÄƒ codul

### incentives
user_id, points, badges

shell
CopiazÄƒ codul

### events/content
id, zone_id, asset_id, title, body, media, start, end

yaml
CopiazÄƒ codul

---

## ğŸ”— QR Code Structure

https://cityfix.app/s/{qr_id}?z={zone_id}&a={asset_id}&t={type_hint}

yaml
CopiazÄƒ codul

Metadata:
- qr_id  
- zone_id  
- asset_id  
- geo_hint  
- type_hint  

---

## ğŸ“¡ API Endpoints (FastAPI)

### Reports
POST /reports
GET /reports/{id}
GET /reports?near_lat=...&near_lon=...
PATCH /reports/{id}/status

shell
CopiazÄƒ codul

### Assets
GET /assets/{id}
GET /assets?zone_id=...
POST /assets

shell
CopiazÄƒ codul

### Incentives
GET /incentives/{user_id}
POST /incentives/redeem

shell
CopiazÄƒ codul

### QR
GET /qr/{qr_id}
POST /qr/generate

yaml
CopiazÄƒ codul

---

## ğŸ§ª MVP Goals

- QR scan â†’ report flow  
- Gemini auto-triage + captioning  
- Admin map filtering  
- Duplicate detection  
- Basic incentives system  
- â€œWhatâ€™s Here?â€ cultural card  
- Generate & print QR codes for the pilot  

---

## ğŸ“Š KPIs (Demo Targets)

- Report creation time **< 30 seconds**  
- Duplicate suppression **> 40%**  
- AI triage accuracy **â‰¥ 80%**  
- SLA dashboard functional end-to-end  

---

## ğŸ›¡ï¸ Security & Privacy

- GDPR-compliant  
- Anonymous reporting supported  
- Face/license plate blurring  
- Role-based access:
  - **citizen**
  - **moderator**
  - **contractor**
  - **department_admin**
  - **city_admin**  
- No sensitive personal data required  

---

## ğŸ“¬ Getting Started (NO Docker)

### 1. Clone
git clone https://github.com/<your-org>/cityfix-qr

shell
CopiazÄƒ codul

### 2. Install Supabase CLI
npm install -g supabase

sql
CopiazÄƒ codul

Start local database:
supabase start

shell
CopiazÄƒ codul

### 3. Run FastAPI Backend
cd backend
pip install -r requirements.txt
uvicorn app.main:app --reload

shell
CopiazÄƒ codul

### 4. Run Next.js Web App
cd web
npm install
npm run dev

shell
CopiazÄƒ codul

### 5. Run Flutter App
cd app
flutter pub get
flutter run

yaml
CopiazÄƒ codul

---

## ğŸ¤ Contributing

Pull requests are welcome!  
Ensure:
- Code is formatted  
- Add minimal tests  
- Clean commit messages  

---

## âš–ï¸ License

MIT License â€” free for civic innovation and academic use.

## ğŸš€ Getting Started

### 1. Clone the repository

git clone https://github.com/<your-username>/cityfix.git
cd cityfix

---

## ğŸ§© Backend (FastAPI)

cd backend
python -m venv .venv
.\.venv\Scripts\activate   # Windows
# or
source .venv/bin/activate # macOS/Linux

pip install -r requirements.txt

uvicorn app.main:app --reload

Backend runs at http://127.0.0.1:8000

---

## ğŸŒ Web App (Next.js)

cd web
npm install

# create .env.local (see .env.example if included)
npm run dev

Web app runs at http://localhost:3000

---

## ğŸ“± Flutter App

cd app
flutter pub get
flutter run

---

## ğŸ—„ï¸ Supabase (optional local mode)

npm install -g supabase
supabase start
